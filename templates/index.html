{% include 'base.html' %}

{% block content %}
    <h1>Notes</h1>

    <input type="text" id="search-input" placeholder="Search notes...">
    <ul id="notes-list">
        {% for note in notes %}
            <li><a href="{% url 'detail' pk=note.pk %}">{{ note.title }}</a>
            </li>
        {% empty %}
            <li>No notes yet.</li>
        {% endfor %}
    </ul>
    <a href="{% url 'create' %}">Create a new note</a>
{% endblock %}

<script>
    const searchInput = document.getElementById('search-input');
    const notesList = document.getElementById('notes-list');
    const notes = notesList.getElementsByTagName('li');

    searchInput.addEventListener('input', function () {
        const searchTerm = searchInput.value.toLowerCase();
        for (let i = 0; i < notes.length; i++) {
            const noteText = notes[i].textContent.toLowerCase();
            if (noteText.includes(searchTerm)) {
                notes[i].style.display = 'block';
            } else {
                notes[i].style.display = 'none';
            }
        }
    });
</script>